# ğŸ“‹ Danh SÃ¡ch Äáº§y Äá»§ CÃ¡c TÃ­nh NÄƒng CRM

TÃ i liá»‡u nÃ y liá»‡t kÃª táº¥t cáº£ cÃ¡c tÃ­nh nÄƒng Ä‘Ã£ Ä‘Æ°á»£c xÃ¢y dá»±ng trong há»‡ thá»‘ng CRM cá»§a CTSS.

---

## ğŸ¯ **LAYOUT & GIAO DIá»†N**

### 1. **Layout 3 Cá»™t**
- âœ… **Left Panel**: Danh sÃ¡ch khÃ¡ch hÃ ng vá»›i tÃ¬m kiáº¿m
- âœ… **Center Panel**: Chi tiáº¿t khÃ¡ch hÃ ng vá»›i edit inline
- âœ… **Right Panel**: Lá»‹ch sá»­ hoáº¡t Ä‘á»™ng vÃ  áº£nh khÃ¡ch hÃ ng

### 2. **Header vá»›i Action Buttons**
- âœ… NÃºt "Quáº£n lÃ½ nhÃ³m"
- âœ… NÃºt "KhÃ¡ch hÃ ng gáº§n Ä‘Ã¢y"
- âœ… NÃºt "Thá»‘ng kÃª khÃ¡ch hÃ ng"
- âœ… NÃºt "Nháº­p tá»« tá»‡p excel"
- âœ… NÃºt "ThÃªm má»›i"

### 3. **Stats Cards (Thá»‘ng kÃª nhanh)**
- âœ… Tá»•ng sá»‘ khÃ¡ch hÃ ng
- âœ… KhÃ¡ch hÃ ng má»›i hÃ´m nay
- âœ… KhÃ¡ch hÃ ng sinh nháº­t hÃ´m nay
- âœ… KhÃ¡ch hÃ ng sinh nháº­t thÃ¡ng nÃ y

---

## ğŸ‘¥ **QUáº¢N LÃ KHÃCH HÃ€NG (CRUD)**

### 1. **Xem Danh SÃ¡ch KhÃ¡ch HÃ ng**
- âœ… Hiá»ƒn thá»‹ danh sÃ¡ch khÃ¡ch hÃ ng trong Left Panel
- âœ… TÃ¬m kiáº¿m khÃ¡ch hÃ ng theo tÃªn, sá»‘ Ä‘iá»‡n thoáº¡i
- âœ… Sáº¯p xáº¿p theo: NgÃ y táº¡o, Tá»•ng chi tiÃªu, LÆ°á»£t Ä‘áº¿n, Láº§n Ä‘áº¿n cuá»‘i
- âœ… Lá»c theo tráº¡ng thÃ¡i: Táº¥t cáº£, Hoáº¡t Ä‘á»™ng, KhÃ´ng hoáº¡t Ä‘á»™ng, Blacklist
- âœ… PhÃ¢n trang (10 khÃ¡ch hÃ ng/trang)

### 2. **Xem Chi Tiáº¿t KhÃ¡ch HÃ ng**
- âœ… Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin khÃ¡ch hÃ ng trong Center Panel
- âœ… ThÃ´ng tin cÆ¡ báº£n:
  - MÃ£ khÃ¡ch hÃ ng
  - Há» tÃªn
  - Sá»‘ Ä‘iá»‡n thoáº¡i
  - Email
  - Giá»›i tÃ­nh
  - NgÃ y sinh
  - Äá»‹a chá»‰ (PhÆ°á»ng/Quáº­n, ThÃ nh phá»‘)
- âœ… Thá»‘ng kÃª:
  - Khá»Ÿi táº¡o lÃºc
  - GhÃ© thÄƒm láº§n cuá»‘i
  - Háº¡ng (ThÆ°á»ng, VIP, v.v.)
  - Äiá»ƒm thÆ°á»Ÿng
  - Tá»•ng sá»‘ láº§n Ä‘áº·t trÆ°á»›c
  - Tá»•ng sá»‘ láº§n Ä‘áº·t tá»« app
  - Tá»•ng sá»‘ láº§n Ä‘áº¿n trá»±c tiáº¿p
  - Tá»•ng sá»‘ láº§n há»§y Ä‘áº·t / khÃ´ng Ä‘áº¿n
- âœ… ThÃ´ng tin má»Ÿ rá»™ng:
  - Facebook
  - Sá»‘ ÄT Zalo
  - TÃ i khoáº£n liÃªn káº¿t Zalo
  - Website
  - Chiá»u cao
  - CÃ¢n náº·ng
  - MÃ£ tháº»
  - Nghá» nghiá»‡p
  - CÃ´ng ty
  - MÃ£ sá»‘ thuáº¿
  - Quá»‘c gia
  - Nguá»“n giá»›i thiá»‡u
  - Ghi chÃº

### 3. **ThÃªm KhÃ¡ch HÃ ng Má»›i**
- âœ… Modal form thÃªm khÃ¡ch hÃ ng (`CustomerFormModal`)
- âœ… Validation Ä‘áº§y Ä‘á»§
- âœ… Tá»± Ä‘á»™ng refresh danh sÃ¡ch sau khi thÃªm

### 4. **Sá»­a ThÃ´ng Tin KhÃ¡ch HÃ ng**
- âœ… **Edit Inline** trong Center Panel (khÃ´ng cáº§n modal)
- âœ… Cháº¿ Ä‘á»™ xem vÃ  cháº¿ Ä‘á»™ chá»‰nh sá»­a
- âœ… LÆ°u vÃ  há»§y thay Ä‘á»•i
- âœ… Tá»± Ä‘á»™ng cáº­p nháº­t sau khi lÆ°u

### 5. **XÃ³a KhÃ¡ch HÃ ng**
- âœ… NÃºt xÃ³a trong header cá»§a Center Panel
- âœ… Confirm dialog trÆ°á»›c khi xÃ³a
- âœ… Tá»± Ä‘á»™ng refresh danh sÃ¡ch sau khi xÃ³a

---

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ **QUáº¢N LÃ NHÃ“M KHÃCH HÃ€NG**

### 1. **Quáº£n LÃ½ NhÃ³m (Modal)**
- âœ… Modal "Quáº£n lÃ½ nhÃ³m" (`CustomerGroupManagementModal`)
- âœ… Xem danh sÃ¡ch táº¥t cáº£ nhÃ³m
- âœ… Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng khÃ¡ch hÃ ng trong má»—i nhÃ³m
- âœ… **Táº¡o nhÃ³m má»›i**
- âœ… **Sá»­a tÃªn nhÃ³m**
- âœ… **XÃ³a nhÃ³m**
- âœ… **ThÃªm khÃ¡ch hÃ ng vÃ o nhÃ³m** (modal riÃªng)

### 2. **ThÃªm KhÃ¡ch HÃ ng VÃ o NhÃ³m**
- âœ… Dropdown "ThÃªm nhÃ³m khÃ¡ch hÃ ng" trong Center Panel
- âœ… Chá»n nhÃ³m cÃ³ sáºµn
- âœ… Táº¡o nhÃ³m má»›i tá»« dropdown
- âœ… XÃ³a khÃ¡ch hÃ ng khá»i nhÃ³m hiá»‡n táº¡i
- âœ… Di chuyá»ƒn khÃ¡ch hÃ ng giá»¯a cÃ¡c nhÃ³m

### 3. **Persistence (LÆ°u trá»¯)**
- âœ… NhÃ³m Ä‘Æ°á»£c lÆ°u vÃ o database
- âœ… NhÃ³m khÃ´ng bá»‹ máº¥t sau khi refresh trang
- âœ… NhÃ³m trá»‘ng (chÆ°a cÃ³ khÃ¡ch hÃ ng) váº«n Ä‘Æ°á»£c lÆ°u

---

## ğŸ“Š **THá»NG KÃŠ & BÃO CÃO**

### 1. **Thá»‘ng KÃª KhÃ¡ch HÃ ng (Modal)**
- âœ… Modal "Thá»‘ng kÃª khÃ¡ch hÃ ng" (`CustomerStatsModal`)
- âœ… Hiá»ƒn thá»‹ cÃ¡c chá»‰ sá»‘ thá»‘ng kÃª tá»•ng quan

### 2. **KhÃ¡ch HÃ ng Gáº§n ÄÃ¢y**
- âœ… Modal "KhÃ¡ch hÃ ng gáº§n Ä‘Ã¢y" (`RecentCustomersModal`)
- âœ… Hiá»ƒn thá»‹ danh sÃ¡ch khÃ¡ch hÃ ng Ä‘Ã£ tÆ°Æ¡ng tÃ¡c gáº§n Ä‘Ã¢y

---

## ğŸ“ **IMPORT/EXPORT**

### 1. **Import Tá»« Excel**
- âœ… Modal "Nháº­p tá»« tá»‡p excel" (`ImportExcelModal`)
- âœ… Upload file Excel
- âœ… Import dá»¯ liá»‡u khÃ¡ch hÃ ng tá»« Excel
- âœ… Tá»± Ä‘á»™ng refresh danh sÃ¡ch sau khi import

---

## ğŸ“¸ **QUáº¢N LÃ áº¢NH KHÃCH HÃ€NG**

### 1. **Tab áº¢nh KhÃ¡ch HÃ ng**
- âœ… Tab "áº¢nh KhÃ¡ch HÃ ng" trong Right Panel
- âœ… Component `CustomerPhotosTab`

### 2. **Upload áº¢nh**
- âœ… Upload nhiá»u áº£nh cÃ¹ng lÃºc
- âœ… ThÃªm mÃ´ táº£ cho áº£nh (tÃ¹y chá»n)
- âœ… Hiá»ƒn thá»‹ ngÆ°á»i upload
- âœ… LÆ°u áº£nh vÃ o thÆ° má»¥c `public/uploads/customer-photos/[customerId]/`

### 3. **Xem áº¢nh**
- âœ… Hiá»ƒn thá»‹ áº£nh theo ngÃ y (grouped by date)
- âœ… Thumbnail vá»›i hover effects
- âœ… Hiá»ƒn thá»‹ metadata: ngÃ y giá» upload, ngÆ°á»i upload, mÃ´ táº£

### 4. **Chá»‰nh Sá»­a áº¢nh**
- âœ… Sá»­a mÃ´ táº£ áº£nh
- âœ… Modal chá»‰nh sá»­a

### 5. **Download áº¢nh**
- âœ… Download tá»«ng áº£nh
- âœ… NÃºt download cho má»—i áº£nh

### 6. **XÃ³a áº¢nh**
- âœ… XÃ³a tá»«ng áº£nh
- âœ… XÃ³a táº¥t cáº£ áº£nh
- âœ… Confirm dialog trÆ°á»›c khi xÃ³a

---

## ğŸ“‹ **Lá»ŠCH Sá»¬ GIAO Dá»ŠCH (Right Panel)**

### 1. **Tab "Lá»‹ch Sá»­ Giao Dá»‹ch"**
- âœ… Component `CustomerActivityPanel`
- âœ… CÃ¡c section cÃ³ thá»ƒ expand/collapse:

#### **Lá»‹ch Háº¹n Sáº¯p Tá»›i**
- âœ… Hiá»ƒn thá»‹ lá»‹ch háº¹n sáº¯p tá»›i
- âœ… Link xem lá»‹ch háº¹n cÅ© (6 thÃ¡ng gáº§n Ä‘Ã¢y)

#### **ÄÆ¡n HÃ ng ÄÃ£ Thá»±c Hiá»‡n**
- âœ… Hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng Ä‘Æ¡n hÃ ng
- âœ… Danh sÃ¡ch Ä‘Æ¡n hÃ ng Ä‘Ã£ thá»±c hiá»‡n

#### **CÃ¡c Láº§n Tráº£ Tiá»n**
- âœ… Hiá»ƒn thá»‹ lá»‹ch sá»­ thanh toÃ¡n
- âœ… Sá»‘ lÆ°á»£ng láº§n tráº£ tiá»n

#### **Tháº» Dá»‹ch Vá»¥ Cá»§a KhÃ¡ch**
- âœ… Hiá»ƒn thá»‹ tháº» dá»‹ch vá»¥ Ä‘Ã£ mua

#### **Dá»‹ch Vá»¥ & Sáº£n Pháº©m YÃªu ThÃ­ch**
- âœ… Hiá»ƒn thá»‹ dá»‹ch vá»¥ vÃ  sáº£n pháº©m yÃªu thÃ­ch

#### **Nháº¯c Nhá»Ÿ ChÆ°a Thá»±c Hiá»‡n**
- âœ… Hiá»ƒn thá»‹ nháº¯c nhá»Ÿ chÆ°a hoÃ n thÃ nh
- âœ… Link "Xem toÃ n bá»™"

#### **Há»“ SÆ¡ Ghi ChÃº**
- âœ… Hiá»ƒn thá»‹ ghi chÃº khÃ¡ch hÃ ng
- âœ… Link "Xem chi tiáº¿t"

---

## ğŸ”§ **CÃC TÃNH NÄ‚NG KHÃC**

### 1. **Actions trong Center Panel**
- âœ… **In HÃ³a ÄÆ¡n** (`onPrintReceipt`)
  - Má»Ÿ trang in hÃ³a Ä‘Æ¡n cho khÃ¡ch hÃ ng
- âœ… **Táº¡o ÄÆ¡n HÃ ng** (`onCreateOrder`)
  - Chuyá»ƒn Ä‘áº¿n trang POS vá»›i customerId
- âœ… **Äáº·t Lá»‹ch Háº¹n** (`onBookAppointment`)
  - Chuyá»ƒn Ä‘áº¿n trang Booking vá»›i customerId
- âœ… **Xem Äiá»ƒm TÃ­ch LÅ©y** (`onViewPoints`)
  - Xem Ä‘iá»ƒm tÃ­ch lÅ©y cá»§a khÃ¡ch hÃ ng
- âœ… **KhÃ³a Gá»­i Zalo** (`onLockZalo`)
  - KhÃ³a tÃ­nh nÄƒng gá»­i Zalo cho khÃ¡ch hÃ ng

### 2. **TÃ¬m Kiáº¿m & Lá»c**
- âœ… TÃ¬m kiáº¿m trong Left Panel
- âœ… TÃ¬m kiáº¿m theo tÃªn, sá»‘ Ä‘iá»‡n thoáº¡i
- âœ… Lá»c theo tráº¡ng thÃ¡i
- âœ… Sáº¯p xáº¿p theo nhiá»u tiÃªu chÃ­

### 3. **Responsive Design**
- âœ… Layout responsive
- âœ… Sidebar cÃ³ thá»ƒ toggle (áº©n/hiá»‡n)
- âœ… Main content tá»± Ä‘á»™ng Ä‘iá»u chá»‰nh khi sidebar thay Ä‘á»•i

---

## ğŸ”Œ **API ENDPOINTS**

### 1. **Customer APIs**
- âœ… `GET /api/customers` - Láº¥y danh sÃ¡ch khÃ¡ch hÃ ng
- âœ… `POST /api/customers` - Táº¡o khÃ¡ch hÃ ng má»›i
- âœ… `PUT /api/customers/[id]` - Cáº­p nháº­t khÃ¡ch hÃ ng
- âœ… `DELETE /api/customers/[id]` - XÃ³a khÃ¡ch hÃ ng
- âœ… `GET /api/customers/[id]/receipt` - In hÃ³a Ä‘Æ¡n

### 2. **Group APIs**
- âœ… `GET /api/crm/groups` - Láº¥y danh sÃ¡ch nhÃ³m
- âœ… `POST /api/crm/groups` - Táº¡o nhÃ³m má»›i
- âœ… `POST /api/crm/customers/update-group` - Cáº­p nháº­t nhÃ³m cá»§a khÃ¡ch hÃ ng

### 3. **Photo APIs**
- âœ… `GET /api/crm/customers/[customerId]/photos` - Láº¥y danh sÃ¡ch áº£nh
- âœ… `POST /api/crm/customers/[customerId]/photos` - LÆ°u thÃ´ng tin áº£nh
- âœ… `POST /api/crm/customers/[customerId]/photos/upload` - Upload file áº£nh
- âœ… `DELETE /api/crm/customers/[customerId]/photos/[photoId]` - XÃ³a áº£nh

### 4. **Import APIs**
- âœ… `POST /api/crm/customers/import` - Import khÃ¡ch hÃ ng tá»« Excel

### 5. **Stats APIs**
- âœ… `GET /api/crm/dashboard` - Dashboard statistics
- âœ… `GET /api/crm/dashboard/insights` - CRM insights

---

## ğŸ“¦ **COMPONENTS**

### 1. **Main Components**
- âœ… `CustomerListPanel` - Left panel danh sÃ¡ch khÃ¡ch hÃ ng
- âœ… `CustomerDetailPanel` - Center panel chi tiáº¿t khÃ¡ch hÃ ng
- âœ… `CustomerActivityPanel` - Right panel lá»‹ch sá»­ hoáº¡t Ä‘á»™ng

### 2. **Modal Components**
- âœ… `CustomerFormModal` - Form thÃªm/sá»­a khÃ¡ch hÃ ng
- âœ… `CustomerGroupManagementModal` - Quáº£n lÃ½ nhÃ³m
- âœ… `AddCustomerToGroupModal` - ThÃªm khÃ¡ch vÃ o nhÃ³m
- âœ… `RecentCustomersModal` - KhÃ¡ch hÃ ng gáº§n Ä‘Ã¢y
- âœ… `CustomerStatsModal` - Thá»‘ng kÃª khÃ¡ch hÃ ng
- âœ… `ImportExcelModal` - Import tá»« Excel

### 3. **Tab Components**
- âœ… `CustomerPhotosTab` - Tab quáº£n lÃ½ áº£nh khÃ¡ch hÃ ng

---

## ğŸ—„ï¸ **DATABASE MODELS**

### 1. **Customer Model**
- âœ… ThÃ´ng tin cÆ¡ báº£n (id, name, phone, email, birthday, gender, address)
- âœ… Thá»‘ng kÃª (totalSpent, totalVisits, loyaltyPoints)
- âœ… Tráº¡ng thÃ¡i (status: ACTIVE, INACTIVE, BLACKLISTED)
- âœ… Relations: profile, photos, bookings, invoices, etc.

### 2. **CustomerProfile Model**
- âœ… Preferences (JSON) - LÆ°u thÃ´ng tin má»Ÿ rá»™ng
- âœ… CustomerGroup trong preferences
- âœ… Facebook, Zalo, Website, Height, Weight, Card ID, Occupation, Company, Tax ID, Country, Referral Source

### 3. **CustomerPhoto Model** (Má»›i)
- âœ… id, customerId, imageUrl, description, uploadedBy
- âœ… createdAt, updatedAt
- âœ… Relation vá»›i Customer

---

## âœ… **TÃNH NÄ‚NG ÄÃƒ HOÃ€N THÃ€NH**

### âœ… HoÃ n toÃ n hoáº¡t Ä‘á»™ng:
1. âœ… Xem danh sÃ¡ch khÃ¡ch hÃ ng
2. âœ… TÃ¬m kiáº¿m khÃ¡ch hÃ ng
3. âœ… Xem chi tiáº¿t khÃ¡ch hÃ ng
4. âœ… ThÃªm khÃ¡ch hÃ ng má»›i
5. âœ… Sá»­a thÃ´ng tin khÃ¡ch hÃ ng (inline edit)
6. âœ… XÃ³a khÃ¡ch hÃ ng
7. âœ… Quáº£n lÃ½ nhÃ³m khÃ¡ch hÃ ng (táº¡o, sá»­a, xÃ³a)
8. âœ… ThÃªm khÃ¡ch hÃ ng vÃ o nhÃ³m
9. âœ… Di chuyá»ƒn khÃ¡ch hÃ ng giá»¯a cÃ¡c nhÃ³m
10. âœ… Upload áº£nh khÃ¡ch hÃ ng
11. âœ… Xem áº£nh khÃ¡ch hÃ ng
12. âœ… XÃ³a áº£nh khÃ¡ch hÃ ng
13. âœ… Download áº£nh khÃ¡ch hÃ ng
14. âœ… Chá»‰nh sá»­a mÃ´ táº£ áº£nh
15. âœ… Import tá»« Excel
16. âœ… Thá»‘ng kÃª khÃ¡ch hÃ ng
17. âœ… KhÃ¡ch hÃ ng gáº§n Ä‘Ã¢y
18. âœ… Lá»‹ch sá»­ giao dá»‹ch (UI structure)

### âš ï¸ Cáº§n phÃ¡t triá»ƒn thÃªm:
1. âš ï¸ Lá»‹ch háº¹n sáº¯p tá»›i (chÆ°a cÃ³ dá»¯ liá»‡u thá»±c)
2. âš ï¸ ÄÆ¡n hÃ ng Ä‘Ã£ thá»±c hiá»‡n (chÆ°a cÃ³ dá»¯ liá»‡u thá»±c)
3. âš ï¸ CÃ¡c láº§n tráº£ tiá»n (chÆ°a cÃ³ dá»¯ liá»‡u thá»±c)
4. âš ï¸ Tháº» dá»‹ch vá»¥ (chÆ°a cÃ³ dá»¯ liá»‡u thá»±c)
5. âš ï¸ Dá»‹ch vá»¥ yÃªu thÃ­ch (chÆ°a cÃ³ dá»¯ liá»‡u thá»±c)
6. âš ï¸ Nháº¯c nhá»Ÿ (chÆ°a cÃ³ dá»¯ liá»‡u thá»±c)
7. âš ï¸ Há»“ sÆ¡ ghi chÃº (chÆ°a cÃ³ dá»¯ liá»‡u thá»±c)
8. âš ï¸ Xem Ä‘iá»ƒm tÃ­ch lÅ©y (chÆ°a cÃ³ trang chi tiáº¿t)
9. âš ï¸ KhÃ³a gá»­i Zalo (chÆ°a cÃ³ logic thá»±c)
10. âš ï¸ In hÃ³a Ä‘Æ¡n (chÆ°a cÃ³ template)
11. âš ï¸ Táº¡o Ä‘Æ¡n hÃ ng (chuyá»ƒn Ä‘áº¿n POS, chÆ°a tÃ­ch há»£p)
12. âš ï¸ Äáº·t lá»‹ch háº¹n (chuyá»ƒn Ä‘áº¿n Booking, chÆ°a tÃ­ch há»£p)

---

## ğŸ“ **GHI CHÃš**

- Táº¥t cáº£ cÃ¡c tÃ­nh nÄƒng Ä‘Ã£ Ä‘Æ°á»£c implement vá»›i **fallback mock data** khi database khÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c
- UI/UX Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t káº¿ theo chuáº©n hiá»‡n Ä‘áº¡i vá»›i Tailwind CSS
- Components Ä‘Æ°á»£c tá»• chá»©c rÃµ rÃ ng, dá»… maintain
- API endpoints cÃ³ error handling vÃ  validation Ä‘áº§y Ä‘á»§

---

**Cáº­p nháº­t láº§n cuá»‘i:** 2025-01-XX

